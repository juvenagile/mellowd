<div class="container">
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4">
    <% events.each do |event| %>
      <% if event && event.persisted? %>
        <div class="col mb-4">
          <%= link_to event_path(event), class: "text-decoration-none" do %>
            <div class="card">
              <% if event.photo.attached?%>
                <%= image_tag url_for(event.photo), class: "rounded", style: "border-radius: 15px !important;" %>
              <% else %>
                <%= image_tag "https://picsum.photos/seed/picsum/200/200", class: "rounded", style: "border-radius: 15px !important;" %>
              <% end %>
              <h5 style="margin-top: 10px; margin-left: 5px; margin-bottom: 10px;"><strong><%= event.title %></strong></h5>
              <p style="margin: 5px; color: #706F8F;"><strong>Duration:</strong> <%= event.duration %></p>
              <p style="margin: 5px; color: #706F8F;"><strong>Genre:</strong> <%= event.genre %></p>
            </div>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>

  <div data-controller="hide-stuff">
    <div style="width: 100%; height: 600px; border-radius: 15px;"
    data-controller="map"
    data-hide-stuff-target="map"
    data-map-markers-value="<%= markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
    <button data-action="click->hide-stuff#toggleMap">Map</button>
  </div>
</div>