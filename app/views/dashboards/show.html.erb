<%= link_to :back do %>
  <i class="fas fa-arrow-left"></i>
<% end %>
<div class="text-center text-white">
  <img src="https://th.bing.com/th/id/OIG.HYuQ2tVozTi_krzbh3Td?pid=ImgGn" alt="Cover photo" class="banner">
  <div class="dashboard-banner-logo">
    Logo
  </div>

  <div class="container info">
    <h1><%= @dashboard.artist_name %></h1>
    <div class="d-flex justify-content-center">
      <div class="mx-3">
        <i class="fas fa-map-marker-alt"></i>
        <p><%= @dashboard.artist_location %></p>
      </div>
      <div class="mx-3">
        <i class="fas fa-users"></i>
        <p><%= @dashboard.artist_count %></p>
      </div>
      <div class="mx-3">
        <i class="fas fa-music"></i>
        <p><%= @dashboard.artist_genre %></p>
      </div>
    </div>
    <p>Artist Instrument: <%= @dashboard.artist_instrument %></p>
    <p>Traveling Artist: <%= @dashboard.artist_travel ? "Yes" : "No" %></p>
    <% if @dashboard.artist_travel %>
      <p>Traveling Radius: <%= @dashboard.artist_radius %> miles</p>
      <p>Traveling Cities: <%= @dashboard.artist_cities %></p>
    <% end %>

    <% if policy(@dashboard).edit? %>
      <%= link_to edit_dashboard_path(@dashboard) do %>
        <i class="fa-regular fa-pen-to-square text-white"></i>
      <% end %>
    <% end %>

    <% if policy(@dashboard).destroy? %>
      <%= button_to @dashboard, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger", style: "background-color: transparent; border-color: transparent;" do %>
        <i class="fa-regular fa-trash-can text-white"></i>
      <% end %>
    <% end %>
  </div>

  <div data-controller="tabs" data-id="<%= @dashboard.id %>">
    <ul class="list-inline tabs-underlined">
      <li>
        <button data-action="click->tabs#shiftTab" id="audio" class="btn btn-outline-primary">Audio</button>
      </li>
      <li>
        <button data-action="click->tabs#shiftTab" id="video" class="btn btn-outline-primary">Video</button>
      </li>
      <li>
        <button data-action="click->tabs#shiftTab" id="image" class="btn btn-outline-primary">Images</button>
      </li>
    </ul>
    <div id="audio-tab" data-tabs-target="tab">
      <% @dashboard.audios.each do |audio| %>
        <div class="my-dashboard-card">
          <div class="my-dashboard-card-body">
            <%= cl_video_tag(audio.key, format: 'wav', controls: true, preload: "none") %>
          </div>
        </div>
      <% end %>
    </div>
    <div id="video-tab" data-tabs-target="tab" class="d-none">
      <%  @dashboard.videos.each do |video| %>
        <div class="my-dashboard-card">
          <div class="embed-responsive embed-responsive-16by9">
            <%= cl_video_tag(video.key,
              :loop => true, :controls => true,
              :transformation => [
                :quality=>70, :duration=>"10"],
              :fallback_content => "Your browser does not support HTML5 video tags." ) %>
            </div>
        </div>
      <% end %>
    </div>
    <div id="image-tab" data-tabs-target="tab" class="d-none" data-controller="image-gallery">
      <% @dashboard.images.each do |image| %>
        <div class="my-dashboard-card">
          <%= cl_image_tag(image.key, :quality=>70, data: { image_gallery_target: "image", action: "click->image-gallery#open" }) %>
        </div>
      <% end %>
      <div data-image-gallery-target="modal" class="modal">
        <img data-image-gallery-target="modalImage">
        <button data-action="click->image-gallery#close">Close</button>
      </div>
    </div>

  <% if current_user.id != @dashboard.user.id && @dashboard.user.artist %>
    <%= link_to "Send message to artist", chatrooms_path(user_id: @dashboard.user), class: "btn btn-primary m-3", data: {turbo_method: :post} if policy(Event).new? %>
  <% end %>
</div>
